# T1: ABBA


## 部分分：10%

* 只有A？这答案肯定是 0。

## 部分分：40%

* 最多 4x4， 一共16个位置， $2^{16}$ 枚举一下翻转哪些位置。

## 部分分：60%

* 最多 8x8，如果我们指定了某些行和某些列为回文串，我们可以把位置分成几个集合，每个集合里需要完全一样，然后就可以很快算出最小修改操作。那么 $2^{8+8}$ 枚举哪些行哪些列需要回文，然后再判断就行。

## 部分分：80%

* 这是留给标算写的太慢，或者暴力写的太快，再或者有什么奇怪方法的。

## 100%

* 把指数枚举拆开，只枚举哪些行是回文串，然后再把列折叠一下，变成 $\frac{M}{2}$ 列。折叠后的位置用 $a$ 表示是两个 $A$ 叠在一起， $b$ 对应两个 $B$， $ca$ 对应一个 $AB$, $cb$ 对应 $BA$。
然后对每一对折叠对应的列开始讨论，两个列都是回文列的代价（因为有回文行，所以也需要修改一些字母）、两个列左边那个是回文列的代价、两个列右边那个是回文列的代价、两个列都是回文列的代价。
然后这时候对于折叠后的每一列，有三种选择，即 $0,1,2$ 个原本的回文列。会发现这是一个体积只有 $0,1,2$ 的分组背包问题。用背包DP或者双指针或者贪心解决。
最终复杂度 $O(2^{\min(n,m)} \max(n,m)^2 )$。

# T2: 征兵


## 部分分：30%

* 各种暴力枚举剪枝瞎搞。

## 部分分：50%

* 陆军不超过 $\sum A_i \leq 2500$， 空军不超过 $\sum B_i \leq 2500$。留给可能复杂度是 $O((\sum A_i)(\sum B_i))$ 的算法。

## 另外部分：20%

* 如果有的州没兵，那就是$0$。不然就只有 $(1,0), (0,1), (1,1)$几种。令这三种的数目为 $A,B,C$ 个，那当 $X=1$ 时，答案为 $C+1$。如果只有 $(1,1)$ 这一类，那么 $X=2$ 时，答案为 $1$。

## 100%

* 枚举一下 $X$，对于一个州如果 $A_i > X$ 可以视为 $A_i=X$，$B_i$ 同理。然后这样修正后，一个州一定会给出的陆军数量是 $X-B_i$，空军同理。这样我们就可以算出最终的征兵得到的陆军最小值为 $\sum X-B_i$ 最大值为 $\sum A_i$，由于空军陆军总和一定是 $X\cdot N$，所以确定了陆军就确定了空军。

# T3: 仓库管理

* 这题大家暴力写的百花齐放，强到我不得不扩大数据范围，不然卡不住。
* 虽然最后还是有没卡住的，看了下代码，挺强的，我是没想到还能写链表的，那就放过吧。毕竟OI赛事拿一个出题人想不到的暴力方式过了也是有本事。

## 假如没有空间限制

* 区间复制，区间插入，单点查询
* 这题我会！可持久化平衡树！
* MLE! 所以我们要想个别的方法。

## 部分分：50%

* 各种 $O(N^2)$ 算法都有，但是得多少分得看常数。我们可以学习一下各种卡常数方法。

## 部分分：70%

* 留给标算写的太丑，常数巨大的。

## 100%

* 既然没有 $O(N\log N)$ 的空间，咋办？
* ~~直接分块~~
* 那就直接分块吧！
* 召唤：块状链表。查询复杂度 $O(\sqrt{N})$，插入复杂度 $O(\sqrt{N})$，空间复杂度 $O(N)$。
* 直接基于块状链表的暴力是 $O(N\sqrt{N})$ 的。
* 懒得写的同学可以调用 `ext/rope`，但还是建议大家学习一下原理。

# T4: OMMO

## 部分分：25%

* 枚举所有 $?$ 并且，枚举遍历所有子串判断是否是回文串。 复杂度 $O(|S|^2 26^{|S|})$ or $O(|S|^3 26^{|S|})$。

## 部分分另外：25%

* 枚举遍历所有子串判断是否是回文串，但是需要 $O(|S|^2)$。所有需要枚举子串中心，然后枚举半径。 NB的同学可以用 manacher， $O(N)$ 解决这个问题。

## 再另外25%

* 根据期望的线性性，答案等于 $E[\sum 回文(S_i)] = \sum E[回文(S_i)]$。拆开期望符号不需要管里面两个东西是否相关。例如 $E[银币正面+银币反面] = E[银币正面]+E[银币反面]$。
* 那么 $O(|S|^3)$ 枚举子串，计算子串概率。

## 最后25%

* 改成 $O(|S|^2)$ 的枚举就行。
 
## 不存在的0%

* 能不能更快？当然可以！
* 维护每个字母左右的 `?`，以及一个字符串前缀 hash。
* 然后对于每个中心的回文串，在超过 $\log_{26} (10^9 \times N)$ 个 `?` 后，对答案的贡献就可以忽略不计了！（因为我们输出的是小数）
* 所以复杂度 $O(N \log_{26} (10^9 \times N))$