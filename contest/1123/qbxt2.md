# A

### 题目描述

给定一个括号串，求最少进行多少次 “交换两个相邻的字符” 能使该括号串合法。

本题中**合法括号串**的定义如下：

1. 空串是合法括号串。
2. 如果 `A` 是合法括号串，则 `(A)` 是合法括号串。
3. 如果 `A`，`B` 是合法括号串，则 `AB` 是合法括号串。

### 输入格式

一行，表示括号串 $S$ 。

### 输出格式

一行一个整数，表示答案。

### 数据范围

共 $10$ 个测试点。令 $|S|$ 表示 $S$ 的长度。

对于第 $i$ 个测试点，$|S|=6^i$ 。

保证 S 中左右括号数量相等。

提示：建议使用较为快速的输入方式。

# B

### 题目描述

小王带着 $A$ 块钱来到了一个波特前。

小王可以玩任意多次波特（前提是他有钱）。他每次可以往波特里扔**任意正实数**的钱（设其为 $x$ ），然后波特有 $P$ 的概率返给小王 $2x$ 块钱，$1-P$ 的概率啥也不返。

由于波特不蠢，保证有 $P\leq 0.5$ 。

小王希望能赢到 $B$ 块钱。

如果小王采取最佳策略，求成功的概率是（或者无限接近于）多少。

为了方便，令 $P=10^{-6}Q$ ，$Q$ 为整数。

输出对 $998244353$ 取模。

（如果 $ans=\frac{x}{y}\ \ (\gcd(x,y)=1)$ ，那么输出一个在 $[0,998244353)$ 范围内的整数 $z$ ，使得 $zy\equiv x\mod 998244353$ ）

### 输入格式

```
A B Q
```

### 输出格式

输出一行一个整数，表示答案对 $998244353$ 取模后的结果。

### 数据范围

对于 $30\%$ 的数据，$Q=5\times 10^5$ 。

对于另外 $30\%$ 的数据，$B=524288$ 。

对于所有数据，保证 $1\leq A<B\leq 10^6$ ，$1\leq Q\leq 5\times 10^5$ 。

# C

TL=4s

### 题目描述

对于一个长度为 $n$ 的排列 $a$ ，我们定义它的权值为 $\sum\limits_{i=3}^{n-2}[a_{i-1}<a_{i-2}\and a_{i-1}<a_{i}\and a_{i+1}<a_{i}\and a_{i+1}<a_{i+2}]$ 。（即为排列 $a$ 中 “W” 型的个数）。

求随机长度为 $n$ 的排列的权值 $k$ 次方的期望。对 $998244353$ 取模。

### 输入格式

```
n k
```

### 输出格式

一个整数，表示答案。

### 数据范围

对于 $10\%$ 的数据，$k=1$ 。

对于另外 $20\%$ 的数据，$n\leq 10,k\leq 3$ 。

对于另外 $20\%$ 的数据，$n\leq 1000,k\leq 5$​ 。

对于另外 $20\%$ 的数据，$n\leq 100000,k\leq 20$ 。

对于所有数据，$n\leq 10^9,k\leq 100$ 。

# D

### 题目描述

现在是晚上九点，小王即将为群友们献歌一首。

群里总共有 $n$ 位群友，小王也准备了 $n+1$ 首歌。但群友们还没决定好让小王唱哪首。

于是群友准备按照以下规则选取小王最终唱的歌：

1. 所有人按照 $1,2,3,...,n$ 的顺序轮流决策。

   在一次决策中，决策者必须从候选歌单中恰好选出一首移除候选歌单。

2. 显然在所有人都决策完后，候选歌单中只会剩下一首歌，那便是小王最终给群友唱的歌。

$n$ 位群友中的每个人对这 $n+1$ 首歌的看法不一定相同，第 $i$ 个人对第 $j$ 首歌的评价值为 $a_{i,j}$ 。每个人都希望听到小王唱他的评价值尽可能高的歌。

保证对于所有 $i$ ， $a_{i,1},a_{i,2},\dots,a_{i,n},a_{i,n+1}$ 构成一个 $1$ 到 $n+1$ 的排列。

所有群友都绝顶聪明，均会按照最优策略决策。

求小王最终会唱哪首歌。

### 输入格式

第一行一个整数 $n$ 。

接下来 $n$ 行中每行 $n+1$ 个用空格分隔的整数。其中第 $i$ 行的第 $j$ 个整数表示 $a_{i,j}$ 。

### 输出格式

一个整数，表示小王最终会唱的歌的编号。

### 输入样例1

```
2
1 2 3
1 3 2
```

### 输出样例1

```
3
```

### 样例1解释

初始时候选歌单为 $\{1,2,3\}$ 。

首先 $1$ 号群友将 $2$ 移出候选歌单，候选歌单变为 $\{1,3\}$ 。

接着 $2$ 号群友将 $1$ 移出候选歌单，候选歌单变为 $\{3\}$ 。

最终，小王将唱第 $3$ 首歌。

### 数据范围与限制

对于 $20\%$ 的数据，满足 $n\leq 10$ 。

对于 $40\%$ 的数据，满足 $n\leq 20$ 。

对于 $60\%$ 的数据，满足 $n\leq 100$​ 。

对于 $80\%$ 的数据，满足 $n\leq 500$ 。

对于 $100\%$ 的数据，满足 $n\leq 2000$ 。
