# 九 杂项

## 题解区

主要是较难归类为例题的其它题目，大部分是平时练习/比赛的题目，不过既然写了，就一并扔过来吧。

### [[P1351][NOIP2014提高]联合权值](https://www.luogu.com.cn/problem/P1351)

显然，一个n个点、n-1条边的无向连通图就是一颗树，要先把这个条件看明白，不然就寄了。

每条边的长度都是1，那么距离为2的两个点之间必然是越过了一个点，既然要越过一个点，完全可以抓着这个要越过的中转点，利用邻接表存图，然后在其临接点里面找即可。

显然我们不能把一个点的所有临接点都枚举一遍，这样的复杂度是$O(n^2)$的，不能通过所有点。但是，贪心地想，只要我们找到了一个中转点i的最大邻接点和次大邻接点，它们的乘积就是以i为中转点的最大联合权值。我们再枚举所有的i，就可以得到整张图最大的联合权值。

权值和呢？
对于中间节点$v$，设与其连接的节点为$u_1,u_2,u_3...u_j$，权值分别为$W_1,W_2,W_3...W_j$，我们令$sum = \sum W_i$，根据乘法结合律易得总权值和$SUM = \sum_{i=1}^n \sum(sum-W_j)W_j$。

或者，根据我们~~小学二年级学过的~~完全平方公式可得：$(a+b)^2 = a^2+b^2+2ab$，$(\sum_{i=1}^n a_i)^2 = \sum_{i=1}^n a_i^2 + 2a_i(\sum_{k=i+1}^n a_k)$，因此，我们所求的权值和，其实就是每个点权值求和后减去每个权值的平方和。于是就结束了。

发一个第一种解法的代码：
```C++
#include <bits/stdc++.h>
using namespace std;
const int M = 1000001;
int head[M];
int nxt[M];
int to[M];
int cnt;
int val[M];

void add(int from,int t){
    to[++cnt]=t;
    nxt[cnt]=head[from];
    head[from]=cnt;
}

int main(){
    int n;
    cin>>n;
    long long maxn = 0;
    for(int i=1;i<=n-1;i++){ 
        int u,v;
        cin>>u>>v;
        add(u,v);
        add(v,u);
    }
    for(int i=1;i<=n;i++){
        cin>>val[i];
    }
    long long ans = 0;
    for(int i=1;i<=n;i++){
        long long sum = 0;int m1=0,m2=0;
        for(int now = head[i];now;now=nxt[now]){
            int t = to[now];
            if(val[t]>=m1){
                m2 = m1;
                m1 = val[t];
            }else{
                m2 = max(m2,val[t]);
            }
            sum += val[t];
        }
        for(int now = head[i];now;now=nxt[now]){
            int t = to[now];
            ans = (ans+val[t]*(sum-val[t]))%10007;
        }
        maxn = max(maxn,(long long)m1*m2);
    }
    cout<<maxn<<" "<<ans%10007<<endl;
}
```

### [[P5018][NOIP2018普及]对称二叉树](https://www.luogu.com.cn/problem/P5018)

问就是暴搜（

### [[洛谷P3901] 数列找不同](https://www.luogu.com.cn/problem/P3901)

这个题正解好像是莫队？不管，~~写暴力~~

上来第一个思路是记录序列中每一个点的前继，然后在$[l,r]$区间中寻找每一个点的前继，看看前继是不是也在区间里。但是太慢了。

不过，其实我们不需要一个一个比较区间里的所有前继，只要找到区间中的**最大前继**，也就是最靠后的那一个，只要这个前继不在区间里，那么就不可能有前继在区间中。反之，如果存在一个，也不需要继续判断到底有几个，直接输出`No`即可。

那么怎么维护区间最大值呢？ST表。

这样，我们就得到了一个$O(n \log n)$预处理，$O(1)$查询的算法，显然并不是很优，但是仍然可以通过此题。

code：
```C++
#include <bits/stdc++.h>
using namespace std;
const int M = 500001;
int f[M][24];
int n,m,q;
int num[M],pre[M],tb[M];

int read(){
    int f=1;char ch=getchar();int ret=0;
    while(ch<'0' or ch>'9'){if(ch=='-')f=-f;ch=getchar();}
    while(ch>='0' and ch<='9'){ret=ret*10+ch-'0';ch=getchar();}
    return ret*f;
}

int l2g(int a){
    if(a==1)return 0;
    return (l2g(a/2)+1);
}

void init(){
    for(int j=1;(1<<j)<=n;j++){
        for(int i=1;i+(1<<j)-1<=n;i++){
            f[i][j]=max(f[i][j-1],f[i+(1<<(j-1))][j-1]);
        }
    }
}

int find(int l,int r){
    int len = l2g(r-l+1);
    return max(f[l][len],f[r-(1<<(len))+1][len]);
}

int main(){
    cin>>n>>q;
    for(int i=1;i<=n;i++){
        num[i] = read();
        pre[i] = tb[num[i]];
        tb[num[i]] = i;
    }
    for(int i=1;i<=n;i++){
        f[i][0] = pre[i];
    }
    init();
    for(int i=1;i<=q;i++){
        int l,r;
        l = read(); r = read();
        int tmp = find(l,r);
        if(tmp<l){
            printf("Yes\n");
        }else{
            printf("No\n");
        }
    }
}
```

## 当你在debug时

[OI选手常见作死错误列表 - Studying Father's luogu blog](https://studyingfather.blog.luogu.org/frequent-bugs)

~~突然发现`while(1)`好像可以当断点调试用~~



## 当你在停课时

当我在停课时。

写完这个标题之后我发现，我好像没有什么资格给予各位文化课上的任何建议，于是，就当我是在记录自己的停课生涯吧。

~~（我在创建这个标题的时候实际上还没有停课）~~

10.8 UPD：濒临~~月赛~~月考，不过月考基本摆栏了

值得一提的是，CSP二轮时间是10.29，正好是期中考试前一天……

10.9 UPD：正在考虑接下来的停课事宜

目前的建议是，停课前一定不要随意开摆，不然复课以后可能会非常难受

然下来就是注意同步学校课程进度，确认补课内容，必要时一定和教练和学校请求帮助。

如果你在高二停课，将会正好遭遇解析几何和物理电学、化学选必一三大难关，非常建议暑假好好预习

如果恰巧您还~~像我一样~~选择了一门文科，那么强烈建议不要完全放下，~~不然期末背不过的~~

10.11 UPD：确认月考后停课

10.12 UPD：找班主任签字力。预计于10.13日正式停课，带着月考爆炸的忐忑心情出发了。希望不久后的自己，能够感谢现在的一切付出。

10.13 UPD：停课第一天。上午开始整理政治思维导图~~（当作早读）~~，之后完善了笔记知识点的大纲，然后开始继续学习背包dp，线性dp以及区间dp的知识。下午做翰哥出的模拟题，晚上颓废补题

10.14 UPD：停课第二天。上午继续补题，下午继续学习dp。晚上回家颓废。

10.15-16 UPD：周末回家。周六上午有课，下午打了模拟赛（然而起晚了，Div.2 130pts滚粗），晚上听网课。周日上午学习图的连通性问题~~（没听懂）~~以及kmp，终于弄懂了nlogn的LIS怎么写。

10.17 UPD：颓了。~~整了一小会novelAI~~，下午去体测跑1000~~差点是爬着回来的~~，写了三道最短路的题，看到了SPFA的离谱优化（

缴费系统突然关闭了，吓了我一大跳，~~差点原地退役~~

10.18 UPD：上午做翰哥出的四道题~~（好毒瘤）~~并学习KMP，下午学会KMP了！！晚上复习ST表，继续看DP……最后二十分钟开了一道新题

10.19 UPD：昨天晚上睡觉时想到了题目的一个离谱做法，今天一早过来居然把题切了……上午做了合并果子加强版（~~被狗数据气晕.jpg~~），然后图论，中间乱搞系统字体被制裁了……下午图论，晚上终于过了NOIP2021 T1 。晚上还复健了数学，明天继续。今天过了7个题，~~下了好多毒瘤数据~~

10.20 UPD：晨起看云。今天天气不错，云像奔袭的白马。上午中午鼓捣快速幂，gcd，筛法，下午生成树，晚上LCA

10.21 UPD：上午继续图论，看二分图，二叉搜索树入了个小门，看了一道LCA的题~~（没做出来）~~，复习了一下kruskal重构树，然后被树链剖分和tarjan分别血虐……上午还把sdwc的ppt拿出来看了一看（果然有卡车运输）。下午又去体测了，结果测的是引体向上，于是去打了一节课乒乓球。于是今天一个题也没做，最后晚上几分钟看了看区间dp。图论好难。

10.22 UPD 向日葵。向日葵。向日葵。向日葵。向日葵。向日葵……